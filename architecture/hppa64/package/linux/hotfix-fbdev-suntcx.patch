# --- T2-COPYRIGHT-NOTE-BEGIN ---
# T2 SDE: package/*/linux/hotfix-fbdev-suntcx.patch
# Copyright (C) 2022 The T2 SDE Project
# 
# This Copyright note is generated by scripts/Create-CopyPatch,
# more information can be found in the files COPYING and README.
# 
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License version 2 as used by the T2 SDE.
# --- T2-COPYRIGHT-NOTE-END ---

Fix sun tcx fbdev mmap table so the sbus mmap helper actually works at all,
and not "random", map physbas offset memory, broken since
403ae52ac047eb339f2b7e8cdf93a3b8077914db
Author: Robert Reif <reif@earthlink.net>
Date:   Sat Apr 26 22:29:43 2008 -0700

    sparc: fix drivers/video/tcx.c warning

    Fix compile warning:

Signed-off-by: Ren√© Rebe <rene@exactcode.de>

--- ./drivers/video/fbdev/tcx.c.vanilla	2022-07-16 22:04:34.068678650 +0200
+++ ./drivers/video/fbdev/tcx.c	2022-07-16 22:04:55.826677782 +0200
@@ -436,7 +436,7 @@
 			j = i;
 			break;
 		}
-		par->mmap_map[i].poff = op->resource[j].start;
+		par->mmap_map[i].poff = op->resource[j].start - info->fix.smem_start; // op->resource[0].start;
 	}
 
 	info->flags = FBINFO_DEFAULT;
